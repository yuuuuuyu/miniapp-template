# æ›´æ–°æ—¥å¿—æ ¼å¼é…ç½®æŒ‡å—

æœ¬æ–‡æ¡£ä»‹ç»å¦‚ä½•é…ç½®å°ç¨‹åºä¸Šä¼ æ—¶çš„æ›´æ–°æ—¥å¿—æ ¼å¼ï¼Œè®©æ‚¨çš„ç‰ˆæœ¬æè¿°æ›´åŠ è§„èŒƒå’Œæ˜“è¯»ã€‚

## æ”¯æŒçš„æ ¼å¼ç±»å‹

### 1. ç®€å•æ ¼å¼ (simple)
åªæ˜¾ç¤ºæœ€æ–°çš„ä¸€æ¡æäº¤ä¿¡æ¯ï¼Œé€‚åˆå¿«é€Ÿè¿­ä»£çš„åœºæ™¯ã€‚

**é…ç½®æ–¹å¼ï¼š**
```bash
# å‘½ä»¤è¡Œ
node cli/index.js upload --desc-format simple

# æˆ–åœ¨ ci.config.js ä¸­é…ç½®
upload: {
    descFormat: 'simple'
}
```

**è¾“å‡ºç¤ºä¾‹ï¼š**
```
feat(pages): æ·»åŠ ç”¨æˆ·ä¸ªäººä¸­å¿ƒé¡µé¢ (a1b2c3d)
```

### 2. è¯¦ç»†æ ¼å¼ (detailed) - é»˜è®¤
æ˜¾ç¤ºæœ€è¿‘å‡ æ¡æäº¤çš„è¯¦ç»†åˆ—è¡¨ï¼Œé€‚åˆå¸¸è§„å‘å¸ƒã€‚

**é…ç½®æ–¹å¼ï¼š**
```bash
# å‘½ä»¤è¡Œ
node cli/index.js upload --desc-format detailed --commit-count 5

# æˆ–åœ¨ ci.config.js ä¸­é…ç½®
upload: {
    descFormat: 'detailed',
    commitCount: 5
}
```

**è¾“å‡ºç¤ºä¾‹ï¼š**
```
æœ€è¿‘æ›´æ–°:
1. feat(pages): æ·»åŠ ç”¨æˆ·ä¸ªäººä¸­å¿ƒé¡µé¢ (a1b2c3d)
2. fix(api): ä¿®å¤ç™»å½•æ¥å£è¶…æ—¶é—®é¢˜ (b2c3d4e)
3. style(components): ä¼˜åŒ–æŒ‰é’®ç»„ä»¶æ ·å¼ (c3d4e5f)
4. docs: æ›´æ–°APIæ–‡æ¡£ (d4e5f6g)
5. chore: æ›´æ–°ä¾èµ–ç‰ˆæœ¬ (e5f6g7h)
```

### 3. å˜æ›´æ—¥å¿—æ ¼å¼ (changelog) - æ¨è
æŒ‰æäº¤ç±»å‹åˆ†ç»„æ˜¾ç¤ºï¼Œç¬¦åˆæ ‡å‡†å˜æ›´æ—¥å¿—æ ¼å¼ï¼Œé€‚åˆæ­£å¼å‘å¸ƒã€‚

**é…ç½®æ–¹å¼ï¼š**
```bash
# å‘½ä»¤è¡Œ
node cli/index.js upload --desc-format changelog

# æˆ–åœ¨ ci.config.js ä¸­é…ç½®
upload: {
    descFormat: 'changelog'
}
```

**è¾“å‡ºç¤ºä¾‹ï¼š**
```
âœ¨ æ–°åŠŸèƒ½:
â€¢ (pages)æ·»åŠ ç”¨æˆ·ä¸ªäººä¸­å¿ƒé¡µé¢ (a1b2c3d)
â€¢ (api)æ–°å¢æ•°æ®å¯¼å‡ºåŠŸèƒ½ (f6g7h8i)

ğŸ› é—®é¢˜ä¿®å¤:
â€¢ (api)ä¿®å¤ç™»å½•æ¥å£è¶…æ—¶é—®é¢˜ (b2c3d4e)
â€¢ (components)ä¿®å¤è¡¨å•éªŒè¯é”™è¯¯ (g7h8i9j)

ğŸ’„ æ ·å¼è°ƒæ•´:
â€¢ (components)ä¼˜åŒ–æŒ‰é’®ç»„ä»¶æ ·å¼ (c3d4e5f)

ğŸ“ æ–‡æ¡£æ›´æ–°:
â€¢ æ›´æ–°APIæ–‡æ¡£ (d4e5f6g)

ğŸ”§ å…¶ä»–å˜æ›´:
â€¢ æ›´æ–°ä¾èµ–ç‰ˆæœ¬ (e5f6g7h)
```

## é…ç½®é€‰é¡¹è¯¦è§£

### åŸºç¡€é…ç½®

åœ¨ `ci.config.js` ä¸­çš„ `upload` éƒ¨åˆ†æ·»åŠ ä»¥ä¸‹é…ç½®ï¼š

```javascript
upload: {
    // æè¿°æ ¼å¼ï¼š'simple' | 'detailed' | 'changelog'
    descFormat: 'changelog',
    
    // æè¿°æœ€å¤§é•¿åº¦ï¼ˆè¶…å‡ºä¼šè‡ªåŠ¨æˆªæ–­ï¼‰
    descMaxLength: 500,
    
    // è·å–çš„æäº¤è®°å½•æ•°é‡
    commitCount: 5,
    
    // æ˜¯å¦åŒ…å«æäº¤å“ˆå¸Œå€¼
    includeHash: true
}
```

### å‘½ä»¤è¡Œé€‰é¡¹

æ‰€æœ‰é…ç½®éƒ½å¯ä»¥é€šè¿‡å‘½ä»¤è¡Œå‚æ•°è¦†ç›–ï¼š

```bash
# å®Œæ•´ç¤ºä¾‹
node cli/index.js upload \
  --desc-format changelog \
  --commit-count 10 \
  --desc-max-length 300 \
  --no-include-hash
```

## æäº¤ä¿¡æ¯è§„èŒƒ

ä¸ºäº†è·å¾—æœ€ä½³çš„å˜æ›´æ—¥å¿—æ•ˆæœï¼Œå»ºè®®éµå¾ª [Conventional Commits](https://www.conventionalcommits.org/) è§„èŒƒï¼š

### æäº¤ç±»å‹è¯´æ˜

| ç±»å‹ | å›¾æ ‡ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|------|
| `feat` | âœ¨ | æ–°åŠŸèƒ½ | `feat(pages): æ·»åŠ ç”¨æˆ·è®¾ç½®é¡µé¢` |
| `fix` | ğŸ› | é—®é¢˜ä¿®å¤ | `fix(api): ä¿®å¤æ•°æ®åŠ è½½å¤±è´¥é—®é¢˜` |
| `docs` | ğŸ“ | æ–‡æ¡£æ›´æ–° | `docs: æ›´æ–°éƒ¨ç½²æŒ‡å—` |
| `style` | ğŸ’„ | æ ·å¼è°ƒæ•´ | `style(ui): ä¼˜åŒ–ä¸»é¢˜è‰²å½©æ­é…` |
| `refactor` | â™»ï¸ | ä»£ç é‡æ„ | `refactor(utils): é‡æ„å·¥å…·å‡½æ•°` |
| `perf` | âš¡ | æ€§èƒ½ä¼˜åŒ– | `perf(api): ä¼˜åŒ–æ•°æ®æŸ¥è¯¢æ€§èƒ½` |
| `test` | âœ… | æµ‹è¯•ç›¸å…³ | `test: æ·»åŠ ç”¨æˆ·æ¨¡å—å•å…ƒæµ‹è¯•` |
| `build` | ğŸ“¦ | æ„å»ºç›¸å…³ | `build: å‡çº§webpacké…ç½®` |
| `ci` | ğŸ‘· | CI/CD | `ci: æ·»åŠ è‡ªåŠ¨éƒ¨ç½²æµç¨‹` |
| `chore` | ğŸ”§ | å…¶ä»–å˜æ›´ | `chore: æ›´æ–°ä¾èµ–åŒ…ç‰ˆæœ¬` |

### æäº¤ä¿¡æ¯æ ¼å¼

```
<type>(<scope>): <description>

[optional body]

[optional footer]
```

**ç¤ºä¾‹ï¼š**
```
feat(pages): æ·»åŠ ç”¨æˆ·ä¸ªäººä¸­å¿ƒé¡µé¢

- å®ç°ç”¨æˆ·ä¿¡æ¯å±•ç¤º
- æ·»åŠ å¤´åƒä¸Šä¼ åŠŸèƒ½
- æ”¯æŒä¸ªäººä¿¡æ¯ç¼–è¾‘

Closes #123
```

## æœ€ä½³å®è·µ

### 1. é€‰æ‹©åˆé€‚çš„æ ¼å¼

- **å¼€å‘é˜¶æ®µ**ï¼šä½¿ç”¨ `simple` æ ¼å¼ï¼Œå¿«é€Ÿè¿­ä»£
- **æµ‹è¯•é˜¶æ®µ**ï¼šä½¿ç”¨ `detailed` æ ¼å¼ï¼Œä¾¿äºæµ‹è¯•äººå‘˜äº†è§£å˜æ›´
- **ç”Ÿäº§å‘å¸ƒ**ï¼šä½¿ç”¨ `changelog` æ ¼å¼ï¼Œæä¾›ä¸“ä¸šçš„ç‰ˆæœ¬è¯´æ˜

### 2. åˆç†è®¾ç½®å‚æ•°

```javascript
// å¼€å‘ç¯å¢ƒé…ç½®
upload: {
    descFormat: 'simple',
    commitCount: 1,
    descMaxLength: 200,
    includeHash: false
}

// ç”Ÿäº§ç¯å¢ƒé…ç½®
upload: {
    descFormat: 'changelog',
    commitCount: 10,
    descMaxLength: 500,
    includeHash: true
}
```

### 3. ç¯å¢ƒå˜é‡æ”¯æŒ

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡åŠ¨æ€è°ƒæ•´é…ç½®ï¼š

```bash
# è®¾ç½®ç¯å¢ƒå˜é‡
export DESC_FORMAT=changelog
export COMMIT_COUNT=8
export DESC_MAX_LENGTH=400

# è¿è¡Œä¸Šä¼ 
npm run upload
```

### 4. CI/CD é›†æˆ

åœ¨ `.gitlab-ci.yml` æˆ– GitHub Actions ä¸­ä½¿ç”¨ï¼š

```yaml
# GitLab CI
deploy:
  script:
    - npm run upload -- --desc-format changelog --commit-count 5

# GitHub Actions
- name: Upload to WeChat
  run: npm run upload -- --desc-format changelog
```

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **æäº¤ä¿¡æ¯ä¸ç¬¦åˆè§„èŒƒ**
   - è§£å†³ï¼šä½¿ç”¨ `npm run commit` è¿›è¡Œè§„èŒƒåŒ–æäº¤
   - æˆ–è€…æ‰‹åŠ¨ä¿®æ”¹æäº¤ä¿¡æ¯æ ¼å¼

2. **æè¿°è¿‡é•¿è¢«æˆªæ–­**
   - è§£å†³ï¼šè°ƒæ•´ `descMaxLength` å‚æ•°
   - æˆ–è€…å‡å°‘ `commitCount` æ•°é‡

3. **å˜æ›´æ—¥å¿—æ ¼å¼æ˜¾ç¤ºå¼‚å¸¸**
   - è§£å†³ï¼šæ£€æŸ¥æäº¤ä¿¡æ¯æ˜¯å¦ç¬¦åˆ Conventional Commits è§„èŒƒ
   - ä¸ç¬¦åˆè§„èŒƒçš„æäº¤ä¼šå½’ç±»åˆ°"å…¶ä»–å˜æ›´"

### è°ƒè¯•æ¨¡å¼

å¯ç”¨è°ƒè¯•æ¨¡å¼æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯ï¼š

```bash
DEBUG=1 node cli/index.js upload --desc-format changelog
```

## æ€»ç»“

é€šè¿‡åˆç†é…ç½®æ›´æ–°æ—¥å¿—æ ¼å¼ï¼Œå¯ä»¥è®©æ‚¨çš„å°ç¨‹åºç‰ˆæœ¬ç®¡ç†æ›´åŠ ä¸“ä¸šå’Œè§„èŒƒã€‚å»ºè®®ï¼š

1. åœ¨å¼€å‘é˜¶æ®µä½¿ç”¨ç®€å•æ ¼å¼æé«˜æ•ˆç‡
2. åœ¨æ­£å¼å‘å¸ƒæ—¶ä½¿ç”¨å˜æ›´æ—¥å¿—æ ¼å¼æä¾›æ¸…æ™°çš„ç‰ˆæœ¬è¯´æ˜
3. ç»“åˆ Conventional Commits è§„èŒƒè·å¾—æœ€ä½³æ•ˆæœ
4. æ ¹æ®å›¢é˜Ÿéœ€æ±‚è°ƒæ•´é…ç½®å‚æ•°

è¿™æ ·æ—¢èƒ½æ»¡è¶³å¿«é€Ÿå¼€å‘çš„éœ€æ±‚ï¼Œåˆèƒ½ä¸ºç”¨æˆ·å’Œå›¢é˜Ÿæˆå‘˜æä¾›æ¸…æ™°çš„ç‰ˆæœ¬å˜æ›´ä¿¡æ¯ã€‚
