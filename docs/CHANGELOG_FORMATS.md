# æ›´æ–°æ—¥å¿—æ ¼å¼é…ç½®æŒ‡å—

æœ¬æ–‡æ¡£è¯¦ç»†ä»‹ç»å°ç¨‹åºä¸Šä¼ æ—¶çš„æ›´æ–°æ—¥å¿—æ ¼å¼é…ç½®ï¼Œè®©æ‚¨çš„ç‰ˆæœ¬æè¿°æ›´åŠ è§„èŒƒå’Œæ˜“è¯»ã€‚

## ğŸ“‹ æ”¯æŒçš„æ ¼å¼ç±»å‹

### 1. ç®€å•æ ¼å¼ (simple)
**é€‚ç”¨åœºæ™¯**ï¼šå¿«é€Ÿè¿­ä»£çš„å¼€å‘é˜¶æ®µ
**ç‰¹ç‚¹**ï¼šåªæ˜¾ç¤ºæœ€æ–°çš„ä¸€æ¡æäº¤ä¿¡æ¯ï¼Œè¾“å‡ºç®€æ´

**é…ç½®æ–¹å¼ï¼š**
```bash
# å‘½ä»¤è¡Œ
node cli/index.js upload --desc-format simple

# é…ç½®æ–‡ä»¶
upload: {
    descFormat: 'simple'
}
```

**è¾“å‡ºç¤ºä¾‹ï¼š**
```
feat(pages): æ·»åŠ ç”¨æˆ·ä¸ªäººä¸­å¿ƒé¡µé¢ (a1b2c3d)
```

### 2. è¯¦ç»†æ ¼å¼ (detailed) - é»˜è®¤
**é€‚ç”¨åœºæ™¯**ï¼šå¸¸è§„å‘å¸ƒå’Œæµ‹è¯•é˜¶æ®µ
**ç‰¹ç‚¹**ï¼šæ˜¾ç¤ºæœ€è¿‘å‡ æ¡æäº¤çš„è¯¦ç»†åˆ—è¡¨ï¼Œæä¾›å®Œæ•´çš„å˜æ›´å†å²

**é…ç½®æ–¹å¼ï¼š**
```bash
# å‘½ä»¤è¡Œ
node cli/index.js upload --desc-format detailed --commit-count 5

# é…ç½®æ–‡ä»¶
upload: {
    descFormat: 'detailed',
    commitCount: 5
}
```

**è¾“å‡ºç¤ºä¾‹ï¼š**
```
æœ€è¿‘æ›´æ–°:
1. feat(pages): æ·»åŠ ç”¨æˆ·ä¸ªäººä¸­å¿ƒé¡µé¢ (a1b2c3d)
2. fix(api): ä¿®å¤ç™»å½•æ¥å£è¶…æ—¶é—®é¢˜ (b2c3d4e)
3. style(components): ä¼˜åŒ–æŒ‰é’®ç»„ä»¶æ ·å¼ (c3d4e5f)
4. docs: æ›´æ–°APIæ–‡æ¡£ (d4e5f6g)
5. chore: æ›´æ–°ä¾èµ–ç‰ˆæœ¬ (e5f6g7h)
```

### 3. å˜æ›´æ—¥å¿—æ ¼å¼ (changelog) - æ¨è
**é€‚ç”¨åœºæ™¯**ï¼šæ­£å¼å‘å¸ƒï¼Œæä¾›ä¸“ä¸šçš„ç‰ˆæœ¬è¯´æ˜
**ç‰¹ç‚¹**ï¼šæŒ‰æäº¤ç±»å‹è‡ªåŠ¨åˆ†ç»„æ˜¾ç¤ºï¼Œç¬¦åˆæ ‡å‡†å˜æ›´æ—¥å¿—æ ¼å¼

**é…ç½®æ–¹å¼ï¼š**
```bash
# å‘½ä»¤è¡Œ
node cli/index.js upload --desc-format changelog

# é…ç½®æ–‡ä»¶
upload: {
    descFormat: 'changelog'
}
```

**è¾“å‡ºç¤ºä¾‹ï¼š**
```
âœ¨ æ–°åŠŸèƒ½:
â€¢ (pages)æ·»åŠ ç”¨æˆ·ä¸ªäººä¸­å¿ƒé¡µé¢ (a1b2c3d)
â€¢ (api)æ–°å¢æ•°æ®å¯¼å‡ºåŠŸèƒ½ (f6g7h8i)

ğŸ› é—®é¢˜ä¿®å¤:
â€¢ (api)ä¿®å¤ç™»å½•æ¥å£è¶…æ—¶é—®é¢˜ (b2c3d4e)
â€¢ (components)ä¿®å¤è¡¨å•éªŒè¯é”™è¯¯ (g7h8i9j)

ğŸ’„ æ ·å¼è°ƒæ•´:
â€¢ (components)ä¼˜åŒ–æŒ‰é’®ç»„ä»¶æ ·å¼ (c3d4e5f)

ğŸ“ æ–‡æ¡£æ›´æ–°:
â€¢ æ›´æ–°APIæ–‡æ¡£ (d4e5f6g)

ğŸ”§ å…¶ä»–å˜æ›´:
â€¢ æ›´æ–°ä¾èµ–ç‰ˆæœ¬ (e5f6g7h)
```

## âš™ï¸ é…ç½®é€‰é¡¹è¯¦è§£

### åŸºç¡€é…ç½®

åœ¨ `ci.config.js` ä¸­çš„ `upload` éƒ¨åˆ†æ·»åŠ é…ç½®ï¼š

```javascript
upload: {
    // æè¿°æ ¼å¼ï¼š'simple' | 'detailed' | 'changelog'
    descFormat: 'changelog',

    // æè¿°æœ€å¤§é•¿åº¦ï¼ˆè¶…å‡ºä¼šè‡ªåŠ¨æˆªæ–­ï¼‰
    descMaxLength: 500,

    // è·å–çš„æäº¤è®°å½•æ•°é‡
    commitCount: 5,

    // æ˜¯å¦åŒ…å«æäº¤å“ˆå¸Œå€¼
    includeHash: true
}
```

### å‘½ä»¤è¡Œé€‰é¡¹

æ‰€æœ‰é…ç½®éƒ½å¯ä»¥é€šè¿‡å‘½ä»¤è¡Œå‚æ•°è¦†ç›–ï¼š

```bash
# å®Œæ•´ç¤ºä¾‹
node cli/index.js upload \
  --desc-format changelog \
  --commit-count 10 \
  --desc-max-length 300 \
  --no-include-hash
```

### å‚æ•°è¯´æ˜

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `descFormat` | string | `'detailed'` | æè¿°æ ¼å¼ç±»å‹ |
| `commitCount` | number | `5` | è·å–çš„æäº¤è®°å½•æ•°é‡ |
| `descMaxLength` | number | `500` | æè¿°æœ€å¤§é•¿åº¦ |
| `includeHash` | boolean | `true` | æ˜¯å¦åŒ…å«æäº¤å“ˆå¸Œå€¼ |

## ğŸ“ æäº¤ä¿¡æ¯è§„èŒƒ

ä¸ºäº†è·å¾—æœ€ä½³çš„å˜æ›´æ—¥å¿—æ•ˆæœï¼Œå»ºè®®éµå¾ªé¡¹ç›®çš„æäº¤è§„èŒƒã€‚è¯¦ç»†è¯´æ˜è¯·å‚è€ƒ [COMMIT_GUIDE.md](COMMIT_GUIDE.md)ã€‚

### æäº¤ç±»å‹ä¸å›¾æ ‡æ˜ å°„

å˜æ›´æ—¥å¿—æ ¼å¼ä¼šæ ¹æ®æäº¤ç±»å‹è‡ªåŠ¨æ·»åŠ ç›¸åº”å›¾æ ‡ï¼š

| ç±»å‹ | å›¾æ ‡ | åˆ†ç»„åç§° |
|------|------|----------|
| `feat` | âœ¨ | æ–°åŠŸèƒ½ |
| `fix` | ğŸ› | é—®é¢˜ä¿®å¤ |
| `docs` | ğŸ“ | æ–‡æ¡£æ›´æ–° |
| `style` | ğŸ’„ | æ ·å¼è°ƒæ•´ |
| `refactor` | â™»ï¸ | ä»£ç é‡æ„ |
| `perf` | âš¡ | æ€§èƒ½ä¼˜åŒ– |
| `test` | âœ… | æµ‹è¯•ç›¸å…³ |
| `build` | ğŸ“¦ | æ„å»ºç›¸å…³ |
| `ci` | ğŸ‘· | CI/CD |
| `chore` | ğŸ”§ | å…¶ä»–å˜æ›´ |

### å¿«é€Ÿæäº¤
```bash
npm run commit  # ä½¿ç”¨äº¤äº’å¼æäº¤å·¥å…·
```

## ğŸ¯ æœ€ä½³å®è·µ

### 1. ä¸åŒé˜¶æ®µä½¿ç”¨ä¸åŒæ ¼å¼

| é˜¶æ®µ | æ¨èæ ¼å¼ | åŸå›  |
|------|----------|------|
| **å¼€å‘é˜¶æ®µ** | `simple` | å¿«é€Ÿè¿­ä»£ï¼Œç®€æ´æ˜äº† |
| **æµ‹è¯•é˜¶æ®µ** | `detailed` | ä¾¿äºæµ‹è¯•äººå‘˜äº†è§£å˜æ›´ |
| **ç”Ÿäº§å‘å¸ƒ** | `changelog` | æä¾›ä¸“ä¸šçš„ç‰ˆæœ¬è¯´æ˜ |

### 2. ç¯å¢ƒé…ç½®ç¤ºä¾‹

```javascript
// å¼€å‘ç¯å¢ƒé…ç½®
upload: {
    descFormat: 'simple',
    commitCount: 1,
    descMaxLength: 200,
    includeHash: false
}

// ç”Ÿäº§ç¯å¢ƒé…ç½®
upload: {
    descFormat: 'changelog',
    commitCount: 10,
    descMaxLength: 500,
    includeHash: true
}
```

### 3. CI/CD é›†æˆ

```yaml
# GitHub Actions ç¤ºä¾‹
- name: Upload to WeChat
  run: |
    node cli/index.js upload \
      --desc-format changelog \
      --commit-count 5

# GitLab CI ç¤ºä¾‹
deploy:
  script:
    - npm run upload -- --desc-format changelog
```

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**Q: æè¿°è¿‡é•¿è¢«æˆªæ–­æ€ä¹ˆåŠï¼Ÿ**
A: è°ƒæ•´ `descMaxLength` å‚æ•°æˆ–å‡å°‘ `commitCount` æ•°é‡

**Q: å˜æ›´æ—¥å¿—æ ¼å¼æ˜¾ç¤ºå¼‚å¸¸ï¼Ÿ**
A: æ£€æŸ¥æäº¤ä¿¡æ¯æ˜¯å¦ç¬¦åˆè§„èŒƒï¼Œä¸ç¬¦åˆè§„èŒƒçš„æäº¤ä¼šå½’ç±»åˆ°"å…¶ä»–å˜æ›´"

**Q: å¦‚ä½•æŸ¥çœ‹è¯¦ç»†çš„å¤„ç†è¿‡ç¨‹ï¼Ÿ**
A: å¯ç”¨è°ƒè¯•æ¨¡å¼ï¼š
```bash
DEBUG=1 node cli/index.js upload --desc-format changelog
```

### æ¼”ç¤ºå·¥å…·

æŸ¥çœ‹ä¸åŒæ ¼å¼çš„æ•ˆæœï¼š
```bash
npm run demo:changelog  # å¦‚æœé¡¹ç›®ä¸­æœ‰æ­¤è„šæœ¬
```

## ğŸ“š ç›¸å…³æ–‡æ¡£

- **[COMMIT_GUIDE.md](COMMIT_GUIDE.md)** - Git æäº¤è§„èŒƒè¯¦ç»†æŒ‡å—
- **[README.md](README.md)** - é¡¹ç›®æ–‡æ¡£å¯¼èˆª

## ğŸ’¡ æ€»ç»“

é€šè¿‡åˆç†é…ç½®æ›´æ–°æ—¥å¿—æ ¼å¼ï¼Œè®©å°ç¨‹åºç‰ˆæœ¬ç®¡ç†æ›´åŠ ä¸“ä¸šï¼š

1. **å¼€å‘é˜¶æ®µ** - ä½¿ç”¨ç®€å•æ ¼å¼æé«˜æ•ˆç‡
2. **æ­£å¼å‘å¸ƒ** - ä½¿ç”¨å˜æ›´æ—¥å¿—æ ¼å¼æä¾›æ¸…æ™°è¯´æ˜
3. **ç»“åˆè§„èŒƒ** - é…åˆ Conventional Commits è·å¾—æœ€ä½³æ•ˆæœ
4. **çµæ´»é…ç½®** - æ ¹æ®å›¢é˜Ÿéœ€æ±‚è°ƒæ•´å‚æ•°
